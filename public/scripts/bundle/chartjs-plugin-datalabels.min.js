/*!
 * chartjs-plugin-datalabels v2.0.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2021 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */
!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("chart.js/helpers"),require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js/helpers","chart.js"],factory):(global="undefined"!=typeof globalThis?globalThis:global||self).ChartDataLabels=factory(global.Chart.helpers,global.Chart)}(this,(function(helpers,chart_js){"use strict";var devicePixelRatio=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var screen=window.screen;if(screen)return(screen.deviceXDPI||1)/(screen.logicalXDPI||1)}return 1}(),utils_toTextLines=function(inputs){var lines=[],input;for(inputs=[].concat(inputs);inputs.length;)"string"==typeof(input=inputs.pop())?lines.unshift.apply(lines,input.split("\n")):Array.isArray(input)?inputs.push.apply(inputs,input):helpers.isNullOrUndef(inputs)||lines.unshift(""+input);return lines},utils_textSize=function(ctx,lines,font){var items=[].concat(lines),ilen=items.length,prev=ctx.font,width=0,i;for(ctx.font=font.string,i=0;i<ilen;++i)width=Math.max(ctx.measureText(items[i]).width,width);return ctx.font=prev,{height:ilen*font.lineHeight,width:width}},utils_bound=function(min,value,max){return Math.max(min,Math.min(value,max))},utils_arrayDiff=function(a0,a1){var prev=a0.slice(),updates=[],i,j,ilen,v;for(i=0,ilen=a1.length;i<ilen;++i)v=a1[i],-1===(j=prev.indexOf(v))?updates.push([v,1]):prev.splice(j,1);for(i=0,ilen=prev.length;i<ilen;++i)updates.push([prev[i],-1]);return updates},utils_rasterize;function orient(point,origin){var x0=origin.x,y0=origin.y;if(null===x0)return{x:0,y:-1};if(null===y0)return{x:1,y:0};var dx=point.x-x0,dy=point.y-y0,ln=Math.sqrt(dx*dx+dy*dy);return{x:ln?dx/ln:0,y:ln?dy/ln:-1}}function aligned(x,y,vx,vy,align){switch(align){case"center":vx=vy=0;break;case"bottom":vx=0,vy=1;break;case"right":vx=1,vy=0;break;case"left":vx=-1,vy=0;break;case"top":vx=0,vy=-1;break;case"start":vx=-vx,vy=-vy;break;case"end":break;default:align*=Math.PI/180,vx=Math.cos(align),vy=Math.sin(align)}return{x:x,y:y,vx:vx,vy:vy}}var R_INSIDE=0,R_LEFT=1,R_RIGHT=2,R_BOTTOM=4,R_TOP=8;function region(x,y,rect){var res=0;return x<rect.left?res|=1:x>rect.right&&(res|=2),y<rect.top?res|=8:y>rect.bottom&&(res|=4),res}function clipped(segment,area){for(var x0=segment.x0,y0=segment.y0,x1=segment.x1,y1=segment.y1,r0=region(x0,y0,area),r1=region(x1,y1,area),r,x,y;r0|r1&&!(r0&r1);)8&(r=r0||r1)?(x=x0+(x1-x0)*(area.top-y0)/(y1-y0),y=area.top):4&r?(x=x0+(x1-x0)*(area.bottom-y0)/(y1-y0),y=area.bottom):2&r?(y=y0+(y1-y0)*(area.right-x0)/(x1-x0),x=area.right):1&r&&(y=y0+(y1-y0)*(area.left-x0)/(x1-x0),x=area.left),r===r0?r0=region(x0=x,y0=y,area):r1=region(x1=x,y1=y,area);return{x0:x0,x1:x1,y0:y0,y1:y1}}function compute$1(range,config){var anchor=config.anchor,segment=range,x,y;return config.clamp&&(segment=clipped(segment,config.area)),"start"===anchor?(x=segment.x0,y=segment.y0):"end"===anchor?(x=segment.x1,y=segment.y1):(x=(segment.x0+segment.x1)/2,y=(segment.y0+segment.y1)/2),aligned(x,y,range.vx,range.vy,config.align)}var positioners_arc=function(el,config){var angle=(el.startAngle+el.endAngle)/2,vx=Math.cos(angle),vy=Math.sin(angle),r0=el.innerRadius,r1=el.outerRadius;return compute$1({x0:el.x+vx*r0,y0:el.y+vy*r0,x1:el.x+vx*r1,y1:el.y+vy*r1,vx:vx,vy:vy},config)},positioners_point=function(el,config){var v=orient(el,config.origin),rx=v.x*el.options.radius,ry=v.y*el.options.radius;return compute$1({x0:el.x-rx,y0:el.y-ry,x1:el.x+rx,y1:el.y+ry,vx:v.x,vy:v.y},config)},positioners_bar=function(el,config){var v=orient(el,config.origin),x=el.x,y=el.y,sx=0,sy=0;return el.horizontal?(x=Math.min(el.x,el.base),sx=Math.abs(el.base-el.x)):(y=Math.min(el.y,el.base),sy=Math.abs(el.base-el.y)),compute$1({x0:x,y0:y+sy,x1:x+sx,y1:y,vx:v.x,vy:v.y},config)},positioners_fallback=function(el,config){var v=orient(el,config.origin);return compute$1({x0:el.x,y0:el.y,x1:el.x,y1:el.y,vx:v.x,vy:v.y},config)},rasterize=function(v){return Math.round(v*devicePixelRatio)/devicePixelRatio};function boundingRects(model){var borderWidth=model.borderWidth||0,padding=model.padding,th=model.size.height,tw=model.size.width,tx=-tw/2,ty=-th/2;return{frame:{x:tx-padding.left-borderWidth,y:ty-padding.top-borderWidth,w:tw+padding.width+2*borderWidth,h:th+padding.height+2*borderWidth},text:{x:tx,y:ty,w:tw,h:th}}}function getScaleOrigin(el,context){var scale=context.chart.getDatasetMeta(context.datasetIndex).vScale;if(!scale)return null;if(void 0!==scale.xCenter&&void 0!==scale.yCenter)return{x:scale.xCenter,y:scale.yCenter};var pixel=scale.getBasePixel();return el.horizontal?{x:pixel,y:null}:{x:null,y:pixel}}function getPositioner(el){return el instanceof chart_js.ArcElement?positioners_arc:el instanceof chart_js.PointElement?positioners_point:el instanceof chart_js.BarElement?positioners_bar:positioners_fallback}function drawRoundedRect(ctx,x,y,w,h,radius){var HALF_PI=Math.PI/2;if(radius){var r=Math.min(radius,h/2,w/2),left=x+r,top=y+r,right=x+w-r,bottom=y+h-r;ctx.moveTo(x,top),left<right&&top<bottom?(ctx.arc(left,top,r,-Math.PI,-HALF_PI),ctx.arc(right,top,r,-HALF_PI,0),ctx.arc(right,bottom,r,0,HALF_PI),ctx.arc(left,bottom,r,HALF_PI,Math.PI)):left<right?(ctx.moveTo(left,y),ctx.arc(right,top,r,-HALF_PI,HALF_PI),ctx.arc(left,top,r,HALF_PI,Math.PI+HALF_PI)):top<bottom?(ctx.arc(left,top,r,-Math.PI,0),ctx.arc(left,bottom,r,0,Math.PI)):ctx.arc(left,top,r,-Math.PI,Math.PI),ctx.closePath(),ctx.moveTo(x,y)}else ctx.rect(x,y,w,h)}function drawFrame(ctx,rect,model){var bgColor=model.backgroundColor,borderColor=model.borderColor,borderWidth=model.borderWidth;(bgColor||borderColor&&borderWidth)&&(ctx.beginPath(),drawRoundedRect(ctx,rasterize(rect.x)+borderWidth/2,rasterize(rect.y)+borderWidth/2,rasterize(rect.w)-borderWidth,rasterize(rect.h)-borderWidth,model.borderRadius),ctx.closePath(),bgColor&&(ctx.fillStyle=bgColor,ctx.fill()),borderColor&&borderWidth&&(ctx.strokeStyle=borderColor,ctx.lineWidth=borderWidth,ctx.lineJoin="miter",ctx.stroke()))}function textGeometry(rect,align,font){var h=font.lineHeight,w=rect.w,x=rect.x,y;return"center"===align?x+=w/2:"end"!==align&&"right"!==align||(x+=w),{h:h,w:w,x:x,y:rect.y+h/2}}function drawTextLine(ctx,text,cfg){var shadow=ctx.shadowBlur,stroked=cfg.stroked,x=rasterize(cfg.x),y=rasterize(cfg.y),w=rasterize(cfg.w);stroked&&ctx.strokeText(text,x,y,w),cfg.filled&&(shadow&&stroked&&(ctx.shadowBlur=0),ctx.fillText(text,x,y,w),shadow&&stroked&&(ctx.shadowBlur=shadow))}function drawText(ctx,lines,rect,model){var align=model.textAlign,color=model.color,filled=!!color,font=model.font,ilen=lines.length,strokeColor=model.textStrokeColor,strokeWidth=model.textStrokeWidth,stroked=strokeColor&&strokeWidth,i;if(ilen&&(filled||stroked))for(rect=textGeometry(rect,align,font),ctx.font=font.string,ctx.textAlign=align,ctx.textBaseline="middle",ctx.shadowBlur=model.textShadowBlur,ctx.shadowColor=model.textShadowColor,filled&&(ctx.fillStyle=color),stroked&&(ctx.lineJoin="round",ctx.lineWidth=strokeWidth,ctx.strokeStyle=strokeColor),i=0,ilen=lines.length;i<ilen;++i)drawTextLine(ctx,lines[i],{stroked:stroked,filled:filled,w:rect.w,x:rect.x,y:rect.y+rect.h*i})}var Label=function(config,ctx,el,index){var me=this;me._config=config,me._index=index,me._model=null,me._rects=null,me._ctx=ctx,me._el=el};helpers.merge(Label.prototype,{_modelize:function(display,lines,config,context){var me=this,index=me._index,font=helpers.toFont(helpers.resolve([config.font,{}],context,index)),color=helpers.resolve([config.color,chart_js.defaults.color],context,index);return{align:helpers.resolve([config.align,"center"],context,index),anchor:helpers.resolve([config.anchor,"center"],context,index),area:context.chart.chartArea,backgroundColor:helpers.resolve([config.backgroundColor,null],context,index),borderColor:helpers.resolve([config.borderColor,null],context,index),borderRadius:helpers.resolve([config.borderRadius,0],context,index),borderWidth:helpers.resolve([config.borderWidth,0],context,index),clamp:helpers.resolve([config.clamp,!1],context,index),clip:helpers.resolve([config.clip,!1],context,index),color:color,display:display,font:font,lines:lines,offset:helpers.resolve([config.offset,0],context,index),opacity:helpers.resolve([config.opacity,1],context,index),origin:getScaleOrigin(me._el,context),padding:helpers.toPadding(helpers.resolve([config.padding,0],context,index)),positioner:getPositioner(me._el),rotation:helpers.resolve([config.rotation,0],context,index)*(Math.PI/180),size:utils_textSize(me._ctx,lines,font),textAlign:helpers.resolve([config.textAlign,"start"],context,index),textShadowBlur:helpers.resolve([config.textShadowBlur,0],context,index),textShadowColor:helpers.resolve([config.textShadowColor,color],context,index),textStrokeColor:helpers.resolve([config.textStrokeColor,color],context,index),textStrokeWidth:helpers.resolve([config.textStrokeWidth,0],context,index)}},update:function(context){var me=this,model=null,rects=null,index=me._index,config=me._config,value,label,lines,display=helpers.resolve([config.display,!0],context,index);display&&(value=context.dataset.data[index],label=helpers.valueOrDefault(helpers.callback(config.formatter,[value,context]),value),(lines=helpers.isNullOrUndef(label)?[]:utils_toTextLines(label)).length&&(rects=boundingRects(model=me._modelize(display,lines,config,context)))),me._model=model,me._rects=rects},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(chart,center){var me=this,ctx=chart.ctx,model=me._model,rects=me._rects,area;this.visible()&&(ctx.save(),model.clip&&(area=model.area,ctx.beginPath(),ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top),ctx.clip()),ctx.globalAlpha=utils_bound(0,model.opacity,1),ctx.translate(rasterize(center.x),rasterize(center.y)),ctx.rotate(model.rotation),drawFrame(ctx,rects.frame,model),drawText(ctx,model.lines,rects.text,model),ctx.restore())}});var MIN_INTEGER=Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;function rotated(point,center,angle){var cos=Math.cos(angle),sin=Math.sin(angle),cx=center.x,cy=center.y;return{x:cx+cos*(point.x-cx)-sin*(point.y-cy),y:cy+sin*(point.x-cx)+cos*(point.y-cy)}}function projected(points,axis){var min=MAX_INTEGER,max=MIN_INTEGER,origin=axis.origin,i,pt,vx,vy,dp;for(i=0;i<points.length;++i)vx=(pt=points[i]).x-origin.x,vy=pt.y-origin.y,dp=axis.vx*vx+axis.vy*vy,min=Math.min(min,dp),max=Math.max(max,dp);return{min:min,max:max}}function toAxis(p0,p1){var vx=p1.x-p0.x,vy=p1.y-p0.y,ln=Math.sqrt(vx*vx+vy*vy);return{vx:(p1.x-p0.x)/ln,vy:(p1.y-p0.y)/ln,origin:p0,ln:ln}}var HitBox=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function coordinates(el,model,geometry){var point=model.positioner(el,model),vx=point.vx,vy=point.vy;if(!vx&&!vy)return{x:point.x,y:point.y};var w=geometry.w,h=geometry.h,rotation=model.rotation,dx=Math.abs(w/2*Math.cos(rotation))+Math.abs(h/2*Math.sin(rotation)),dy=Math.abs(w/2*Math.sin(rotation))+Math.abs(h/2*Math.cos(rotation)),vs=1/Math.max(Math.abs(vx),Math.abs(vy));return dx*=vx*vs,dy*=vy*vs,dx+=model.offset*vx,dy+=model.offset*vy,{x:point.x+dx,y:point.y+dy}}function collide(labels,collider){var i,j,s0,s1;for(i=labels.length-1;i>=0;--i)for(s0=labels[i].$layout,j=i-1;j>=0&&s0._visible;--j)(s1=labels[j].$layout)._visible&&s0._box.intersects(s1._box)&&collider(s0,s1);return labels}function compute(labels){var i,ilen,label,state,geometry,center,proxy;for(i=0,ilen=labels.length;i<ilen;++i)(state=(label=labels[i]).$layout)._visible&&(proxy=new Proxy(label._el,{get:(el,p)=>el.getProps([p],!0)[p]}),geometry=label.geometry(),center=coordinates(proxy,label.model(),geometry),state._box.update(center,geometry,label.rotation()));return collide(labels,(function(s0,s1){var h0=s0._hidable,h1=s1._hidable;h0&&h1||h1?s1._visible=!1:h0&&(s0._visible=!1)}))}helpers.merge(HitBox.prototype,{center:function(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2}},update:function(center,rect,rotation){this._rotation=rotation,this._rect={x:rect.x+center.x,y:rect.y+center.y,w:rect.w,h:rect.h}},contains:function(point){var me=this,margin=1,rect=me._rect;return!((point=rotated(point,me.center(),-me._rotation)).x<rect.x-1||point.y<rect.y-1||point.x>rect.x+rect.w+2||point.y>rect.y+rect.h+2)},intersects:function(other){var r0=this._points(),r1=other._points(),axes=[toAxis(r0[0],r0[1]),toAxis(r0[0],r0[3])],i,pr0,pr1;for(this._rotation!==other._rotation&&axes.push(toAxis(r1[0],r1[1]),toAxis(r1[0],r1[3])),i=0;i<axes.length;++i)if(pr0=projected(r0,axes[i]),pr1=projected(r1,axes[i]),pr0.max<pr1.min||pr1.max<pr0.min)return!1;return!0},_points:function(){var me=this,rect=me._rect,angle=me._rotation,center=me.center();return[rotated({x:rect.x,y:rect.y},center,angle),rotated({x:rect.x+rect.w,y:rect.y},center,angle),rotated({x:rect.x+rect.w,y:rect.y+rect.h},center,angle),rotated({x:rect.x,y:rect.y+rect.h},center,angle)]}});var layout={prepare:function(datasets){var labels=[],i,j,ilen,jlen,label;for(i=0,ilen=datasets.length;i<ilen;++i)for(j=0,jlen=datasets[i].length;j<jlen;++j)label=datasets[i][j],labels.push(label),label.$layout={_box:new HitBox,_hidable:!1,_visible:!0,_set:i,_idx:j};return labels.sort((function(a,b){var sa=a.$layout,sb=b.$layout;return sa._idx===sb._idx?sb._set-sa._set:sb._idx-sa._idx})),this.update(labels),labels},update:function(labels){var dirty=!1,i,ilen,label,model,state;for(i=0,ilen=labels.length;i<ilen;++i)model=(label=labels[i]).model(),(state=label.$layout)._hidable=model&&"auto"===model.display,state._visible=label.visible(),dirty|=state._hidable;dirty&&compute(labels)},lookup:function(labels,point){var i,state;for(i=labels.length-1;i>=0;--i)if((state=labels[i].$layout)&&state._visible&&state._box.contains(point))return labels[i];return null},draw:function(chart,labels){var i,ilen,label,state,geometry,center;for(i=0,ilen=labels.length;i<ilen;++i)(state=(label=labels[i]).$layout)._visible&&(geometry=label.geometry(),center=coordinates(label._el,label.model(),geometry),state._box.update(center,geometry,label.rotation()),label.draw(chart,center))}},formatter,defaults,EXPANDO_KEY="$datalabels",DEFAULT_KEY="$default",plugin;function configure(dataset,options){var override=dataset.datalabels,listeners={},configs=[],labels,keys;return!1===override?null:(!0===override&&(override={}),options=helpers.merge({},[options,override]),labels=options.labels||{},keys=Object.keys(labels),delete options.labels,keys.length?keys.forEach((function(key){labels[key]&&configs.push(helpers.merge({},[options,labels[key],{_key:key}]))})):configs.push(options),listeners=configs.reduce((function(target,config){return helpers.each(config.listeners||{},(function(fn,event){target[event]=target[event]||{},target[event][config._key||"$default"]=fn})),delete config.listeners,target}),{}),{labels:configs,listeners:listeners})}function dispatchEvent(chart,listeners,label){if(listeners){var context=label.$context,groups=label.$groups,callback;listeners[groups._set]&&(callback=listeners[groups._set][groups._key])&&!0===helpers.callback(callback,[context])&&(chart.$datalabels._dirty=!0,label.update(context))}}function dispatchMoveEvents(chart,listeners,previous,label){var enter,leave;(previous||label)&&(previous?label?previous!==label&&(leave=enter=!0):leave=!0:enter=!0,leave&&dispatchEvent(chart,listeners.leave,previous),enter&&dispatchEvent(chart,listeners.enter,label))}function handleMoveEvents(chart,event){var expando=chart.$datalabels,listeners=expando._listeners,previous,label;if(listeners.enter||listeners.leave){if("mousemove"===event.type)label=layout.lookup(expando._labels,event);else if("mouseout"!==event.type)return;previous=expando._hovered,expando._hovered=label,dispatchMoveEvents(chart,listeners,previous,label)}}function handleClickEvents(chart,event){var expando=chart.$datalabels,handlers=expando._listeners.click,label=handlers&&layout.lookup(expando._labels,event);label&&dispatchEvent(chart,handlers,label)}return{id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(value){if(helpers.isNullOrUndef(value))return null;var label=value,keys,klen,k;if(helpers.isObject(value))if(helpers.isNullOrUndef(value.label))if(helpers.isNullOrUndef(value.r))for(label="",k=0,klen=(keys=Object.keys(value)).length;k<klen;++k)label+=(0!==k?", ":"")+keys[k]+": "+value[keys[k]];else label=value.r;else label=value.label;return""+label},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(chart){chart.$datalabels={_actives:[]}},beforeUpdate:function(chart){var expando=chart.$datalabels;expando._listened=!1,expando._listeners={},expando._datasets=[],expando._labels=[]},afterDatasetUpdate:function(chart,args,options){var datasetIndex=args.index,expando=chart.$datalabels,labels=expando._datasets[datasetIndex]=[],visible=chart.isDatasetVisible(datasetIndex),dataset=chart.data.datasets[datasetIndex],config=configure(dataset,options),elements=args.meta.data||[],ctx=chart.ctx,i,j,ilen,jlen,cfg,key,el,label;for(ctx.save(),i=0,ilen=elements.length;i<ilen;++i)if((el=elements[i]).$datalabels=[],visible&&el&&chart.getDataVisibility(i)&&!el.skip)for(j=0,jlen=config.labels.length;j<jlen;++j)key=(cfg=config.labels[j])._key,(label=new Label(cfg,ctx,el,i)).$groups={_set:datasetIndex,_key:key||"$default"},label.$context={active:!1,chart:chart,dataIndex:i,dataset:dataset,datasetIndex:datasetIndex},label.update(label.$context),el.$datalabels.push(label),labels.push(label);ctx.restore(),helpers.merge(expando._listeners,config.listeners,{merger:function(event,target,source){target[event]=target[event]||{},target[event][args.index]=source[event],expando._listened=!0}})},afterUpdate:function(chart,options){chart.$datalabels._labels=layout.prepare(chart.$datalabels._datasets,options)},afterDatasetsDraw:function(chart){layout.draw(chart,chart.$datalabels._labels)},beforeEvent:function(chart,args){if(chart.$datalabels._listened){var event=args.event;switch(event.type){case"mousemove":case"mouseout":handleMoveEvents(chart,event);break;case"click":handleClickEvents(chart,event)}}},afterEvent:function(chart){var expando=chart.$datalabels,previous=expando._actives,actives=expando._actives=chart.getActiveElements(),updates=utils_arrayDiff(previous,actives),i,ilen,j,jlen,update,label,labels;for(i=0,ilen=updates.length;i<ilen;++i)if((update=updates[i])[1])for(j=0,jlen=(labels=update[0].element.$datalabels||[]).length;j<jlen;++j)(label=labels[j]).$context.active=1===update[1],label.update(label.$context);(expando._dirty||updates.length)&&(layout.update(expando._labels),chart.render()),delete expando._dirty}}}));