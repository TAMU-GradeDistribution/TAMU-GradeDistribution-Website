/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
Version 2.2.1
Full source at https://github.com/jjj/chosen
Copyright (c) 2011-2021 JJJ
MIT License, https://github.com/jjj/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
(function(){var $,AbstractChosen,Chosen,SelectParser;(SelectParser=class SelectParser{constructor(options){this.options_index=0,this.parsed=[],this.copy_data_attributes=options.copy_data_attributes||!1}add_node(child){return"OPTGROUP"===child.nodeName.toUpperCase()?this.add_group(child):this.add_option(child)}add_group(group){var group_position,j,len,option,ref,results1;for(group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:group.label,title:group.title?group.title:void 0,children:0,disabled:group.disabled,hidden:group.hidden,classes:group.className}),results1=[],j=0,len=(ref=group.childNodes).length;j<len;j++)option=ref[j],results1.push(this.add_option(option,group_position,group.disabled));return results1}add_option(option,group_position,group_disabled){if("OPTION"===option.nodeName.toUpperCase())return""!==option.text?(null!=group_position&&(this.parsed[group_position].children+=1),this.parsed.push({options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML.replace(/^\s+|\s+$/g,""),title:option.title?option.title:void 0,selected:option.selected,disabled:!0===group_disabled?group_disabled:option.disabled,hidden:option.hidden,group_array_index:group_position,group_label:null!=group_position?this.parsed[group_position].label:null,classes:option.className,style:option.style.cssText,data:this.parse_data_attributes(option)})):this.parsed.push({options_index:this.options_index,empty:!0,data:this.parse_data_attributes(option)}),this.options_index+=1}parse_data_attributes(option){var attr,attrName,dataAttr,j,len,ref;if(dataAttr={"data-option-array-index":this.parsed.length,"data-value":option.value},this.copy_data_attributes&&option)for(j=0,len=(ref=option.attributes).length;j<len;j++)attrName=(attr=ref[j]).nodeName,/data-.*/.test(attrName)&&(dataAttr[attrName]=attr.nodeValue);return dataAttr}}).select_to_array=function(select,options){var child,j,len,parser,ref;for(parser=new SelectParser(options),j=0,len=(ref=select.childNodes).length;j<len;j++)child=ref[j],parser.add_node(child);return parser.parsed},AbstractChosen=function(){class AbstractChosen{constructor(form_field,options1={}){this.label_click_handler=this.label_click_handler.bind(this),this.form_field=form_field,this.options=options1,AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.can_select_by_group=null!==this.form_field.getAttribute("select-by-group"),this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}set_default_values(){return this.click_test_action=evt=>this.test_active_click(evt),this.activate_action=evt=>this.activate_field(evt),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className),this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_in_values=this.options.search_in_values||!1,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.inherit_option_classes=this.options.inherit_option_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.parser_config=this.options.parser_config||{},this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY,this.case_sensitive_search=this.options.case_sensitive_search||!1,this.hide_results_on_select=null==this.options.hide_results_on_select||this.options.hide_results_on_select,this.create_option=this.options.create_option||!1,this.persistent_create_option=this.options.persistent_create_option||!1,this.skip_no_results=this.options.skip_no_results||!1}set_default_text(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.default_text=this.escape_html(this.default_text),this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text,this.create_option_text=this.form_field.getAttribute("data-create_option_text")||this.options.create_option_text||AbstractChosen.default_create_option_text}choice_label(item){return this.include_group_label_in_selected&&null!=item.group_label?`<b class='group-name'>${this.escape_html(item.group_label)}</b>${item.html}`:item.html}mouse_enter(){return this.mouse_on_container=!0}mouse_leave(){return this.mouse_on_container=!1}input_focus(evt){if(this.is_multiple){if(!this.active_field)return setTimeout(()=>this.container_mousedown(),50)}else if(!this.active_field)return this.activate_field()}input_blur(evt){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(()=>this.blur_test(),100)}label_click_handler(evt){return this.is_multiple?this.container_mousedown(evt):this.activate_field()}results_option_build(options){var content,data,data_content,j,len,ref,shown_results;for(content="",shown_results=0,j=0,len=(ref=this.results_data).length;j<len&&(data_content="",""!==(data_content=(data=ref[j]).group?this.result_add_group(data):this.result_add_option(data))&&(shown_results++,content+=data_content),(null!=options?options.first:void 0)&&(data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(data))),!(shown_results>=this.max_shown_results));j++);return content}result_add_option(option){var attrName,classes,option_el;if(!option.search_match)return"";if(!this.include_option_in_results(option))return"";for(attrName in classes=[],option.disabled||option.selected&&this.is_multiple||classes.push("active-result"),!option.disabled||option.selected&&this.is_multiple||classes.push("disabled-result"),option.selected&&classes.push("result-selected"),null!=option.group_array_index&&classes.push("group-option"),""!==option.classes&&classes.push(option.classes),(option_el=document.createElement("li")).className=classes.join(" "),option.style&&(option_el.style.cssText=option.style),option.data)option.data.hasOwnProperty(attrName)&&option_el.setAttribute(attrName,option.data[attrName]);return option_el.setAttribute("role","option"),option_el.innerHTML=option.highlighted_html||option.html,option_el.id=`${this.form_field.id}-chosen-search-result-${option.data["data-option-array-index"]}`,option.title&&(option_el.title=option.title),this.outerHTML(option_el)}result_add_group(group){var classes,group_el;return(group.search_match||group.group_match)&&group.active_options>0?((classes=[]).push("group-result"),group.classes&&classes.push(group.classes),(group_el=document.createElement("li")).className=classes.join(" "),group_el.innerHTML=group.highlighted_html||this.escape_html(group.label),group.title&&(group_el.title=group.title),this.outerHTML(group_el)):""}append_option(option){return this.select_append_option(option)}results_update_field(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()}reset_single_select_options(){var j,len,ref,result,results1;for(results1=[],j=0,len=(ref=this.results_data).length;j<len;j++)(result=ref[j]).selected?results1.push(result.selected=!1):results1.push(void 0);return results1}results_toggle(){return this.results_showing?this.results_hide():this.results_show()}results_search(evt){return this.results_showing?this.winnow_results():this.results_show(),this.form_field_jq.trigger("chosen:search",{chosen:this})}winnow_results(options){var escaped_query,exact_regex,exact_result,fix,highlight_regex,j,len,match_value,option,prefix,query,ref,regex,results,results_group,search_match,startpos,suffix,text;for(this.no_results_clear(),results=0,exact_result=!1,match_value=!1,escaped_query=(query=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),regex=this.get_search_regex(escaped_query),exact_regex=new RegExp(`^${escaped_query}$`),highlight_regex=this.get_highlight_regex(escaped_query),j=0,len=(ref=this.results_data).length;j<len;j++)(option=ref[j]).search_match=!1,results_group=null,search_match=null,option.highlighted_html="",this.include_option_in_results(option)&&(option.group&&(option.group_match=!1,option.active_options=0),null!=option.group_array_index&&this.results_data[option.group_array_index]&&(0===(results_group=this.results_data[option.group_array_index]).active_options&&results_group.search_match&&(results+=1),results_group.active_options+=1),text=option.group?option.label:option.text,option.group&&!this.group_search||(search_match=this.search_string_match(text,regex),option.search_match=null!=search_match,!option.search_match&&this.search_in_values&&(option.search_match=this.search_string_match(option.value,regex),match_value=!0),option.search_match&&!option.group&&(results+=1),exact_result=exact_result||exact_regex.test(option.html),option.search_match?(query.length&&!match_value&&(startpos=search_match.index,prefix=text.slice(0,startpos),fix=text.slice(startpos,startpos+query.length),suffix=text.slice(startpos+query.length),option.highlighted_html=`${this.escape_html(prefix)}<em>${this.escape_html(fix)}</em>${this.escape_html(suffix)}`),null!=results_group&&(results_group.group_match=!0)):null!=option.group_array_index&&this.results_data[option.group_array_index].search_match&&(option.search_match=!0)));if(this.result_clear_highlight(),results<1&&query.length?(this.update_results_content(""),this.fire_search_updated(query),this.create_option&&this.skip_no_results||this.no_results(query)):(this.update_results_content(this.results_option_build()),this.fire_search_updated(query),(null!=options?options.skip_highlight:void 0)||this.winnow_results_set_highlight()),this.create_option&&(results<1||!exact_result&&this.persistent_create_option)&&query.length)return this.show_create_option(query)}get_search_regex(escaped_search_string){var regex_flag,regex_string;return regex_string=this.search_contains?escaped_search_string:`(^|\\s|\\b)${escaped_search_string}[^\\s]*`,this.enable_split_word_search||this.search_contains||(regex_string=`^${regex_string}`),regex_flag=this.case_sensitive_search?"":"i",new RegExp(regex_string,regex_flag)}get_highlight_regex(escaped_search_string){var regex_anchor,regex_flag;return regex_anchor=this.search_contains?"":"\\b",regex_flag=this.case_sensitive_search?"":"i",new RegExp(regex_anchor+escaped_search_string,regex_flag)}get_list_special_char(){var chars;return(chars=[]).push({val:"ae",let:"(ä|æ|ǽ)"}),chars.push({val:"oe",let:"(ö|œ)"}),chars.push({val:"ue",let:"(ü)"}),chars.push({val:"Ae",let:"(Ä)"}),chars.push({val:"Ue",let:"(Ü)"}),chars.push({val:"Oe",let:"(Ö)"}),chars.push({val:"AE",let:"(Æ|Ǽ)"}),chars.push({val:"ss",let:"(ß)"}),chars.push({val:"IJ",let:"(Ĳ)"}),chars.push({val:"ij",let:"(ĳ)"}),chars.push({val:"OE",let:"(Œ)"}),chars.push({val:"A",let:"(À|Á|Â|Ã|Ä|Å|Ǻ|Ā|Ă|Ą|Ǎ)"}),chars.push({val:"a",let:"(à|á|â|ã|å|ǻ|ā|ă|ą|ǎ|ª)"}),chars.push({val:"C",let:"(Ç|Ć|Ĉ|Ċ|Č)"}),chars.push({val:"c",let:"(ç|ć|ĉ|ċ|č)"}),chars.push({val:"D",let:"(Ð|Ď|Đ)"}),chars.push({val:"d",let:"(ð|ď|đ)"}),chars.push({val:"E",let:"(È|É|Ê|Ë|Ē|Ĕ|Ė|Ę|Ě)"}),chars.push({val:"e",let:"(è|é|ê|ë|ē|ĕ|ė|ę|ě)"}),chars.push({val:"G",let:"(Ĝ|Ğ|Ġ|Ģ)"}),chars.push({val:"g",let:"(ĝ|ğ|ġ|ģ)"}),chars.push({val:"H",let:"(Ĥ|Ħ)"}),chars.push({val:"h",let:"(ĥ|ħ)"}),chars.push({val:"I",let:"(Ì|Í|Î|Ï|Ĩ|Ī|Ĭ|Ǐ|Į|İ)"}),chars.push({val:"i",let:"(ì|í|î|ï|ĩ|ī|ĭ|ǐ|į|ı)"}),chars.push({val:"J",let:"(Ĵ)"}),chars.push({val:"j",let:"(ĵ)"}),chars.push({val:"K",let:"(Ķ)"}),chars.push({val:"k",let:"(ķ)"}),chars.push({val:"L",let:"(Ĺ|Ļ|Ľ|Ŀ|Ł)"}),chars.push({val:"l",let:"(ĺ|ļ|ľ|ŀ|ł)"}),chars.push({val:"N",let:"(Ñ|Ń|Ņ|Ň)"}),chars.push({val:"n",let:"(ñ|ń|ņ|ň|ŉ)"}),chars.push({val:"O",let:"(Ò|Ó|Ô|Õ|Ō|Ŏ|Ǒ|Ő|Ơ|Ø|Ǿ)"}),chars.push({val:"o",let:"(ò|ó|ô|õ|ō|ŏ|ǒ|ő|ơ|ø|ǿ|º)"}),chars.push({val:"R",let:"(Ŕ|Ŗ|Ř)"}),chars.push({val:"r",let:"(ŕ|ŗ|ř)"}),chars.push({val:"S",let:"(Ś|Ŝ|Ş|Š)"}),chars.push({val:"s",let:"(ś|ŝ|ş|š|ſ)"}),chars.push({val:"T",let:"(Ţ|Ť|Ŧ)"}),chars.push({val:"t",let:"(ţ|ť|ŧ)"}),chars.push({val:"U",let:"(Ù|Ú|Û|Ũ|Ū|Ŭ|Ů|Ű|Ų|Ư|Ǔ|Ǖ|Ǘ|Ǚ|Ǜ)"}),chars.push({val:"u",let:"(ù|ú|û|ũ|ū|ŭ|ů|ű|ų|ư|ǔ|ǖ|ǘ|ǚ|ǜ)"}),chars.push({val:"Y",let:"(Ý|Ÿ|Ŷ)"}),chars.push({val:"y",let:"(ý|ÿ|ŷ)"}),chars.push({val:"W",let:"(Ŵ)"}),chars.push({val:"w",let:"(ŵ)"}),chars.push({val:"Z",let:"(Ź|Ż|Ž)"}),chars.push({val:"z",let:"(ź|ż|ž)"}),chars.push({val:"f",let:"(ƒ)"}),chars}escape_special_char(str){var j,len,special,specialChars;for(j=0,len=(specialChars=this.get_list_special_char()).length;j<len;j++)special=specialChars[j],str.replace(new RegExp(special.let,"g"),special.val);return str}search_string_match(search_string,regex){var match;return match=regex.exec(search_string),this.case_sensitive_search||null==match||(match=regex.exec(this.escape_special_char(search_string))),!this.search_contains&&(null!=match?match[1]:void 0)&&(match.index+=1),match}choices_count(){var j,len,option,ref;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,j=0,len=(ref=this.form_field.options).length;j<len;j++)(option=ref[j]).selected&&(this.selected_option_count+=1);return this.selected_option_count}choices_click(evt){if(evt.preventDefault(),this.activate_field(),!this.results_showing&&!this.is_disabled)return this.results_show()}mousedown_checker(evt){var mousedown_type,ref,ref1,ref2;switch(mousedown_type=null,(evt=evt||window.event).which||void 0===evt.button||(evt.which=null!=(ref=1&evt.button)?ref:{1:null!=(ref1=2&evt.button)?ref1:{3:null!=(ref2=4&evt.button)?ref2:{2:0}}}),evt.which){case 1:mousedown_type="left";break;case 2:mousedown_type="right";break;case 3:mousedown_type="middle";break;default:mousedown_type="other"}return mousedown_type}keydown_checker(evt){var ref,stroke;switch(stroke=null!=(ref=evt.which)?ref:evt.keyCode,this.search_field_scale(),8!==stroke&&this.pending_backstroke&&this.clear_backstroke(),stroke){case 8:this.backstroke_length=this.get_search_field_value().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:case 27:this.results_showing&&evt.preventDefault();break;case 32:this.disable_search&&evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:evt.preventDefault(),this.keydown_arrow()}}keyup_checker(evt){var ref,stroke;switch(stroke=null!=(ref=evt.which)?ref:evt.keyCode,this.search_field_scale(),stroke){case 8:this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0?this.keydown_backstroke():this.pending_backstroke||(this.result_clear_highlight(),this.results_search());break;case 13:evt.preventDefault(),this.results_showing&&this.result_select(evt);break;case 27:this.results_showing&&this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search()}}clipboard_event_checker(evt){if(!this.is_disabled)return setTimeout(()=>this.results_search(),50)}container_width(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth>0?`${this.form_field.offsetWidth}px`:"auto"}include_option_in_results(option){return!(this.is_multiple&&!this.display_selected_options&&option.selected)&&(!(!this.display_disabled_options&&option.disabled)&&(!option.empty&&(!option.hidden&&(null==option.group_array_index||!this.results_data[option.group_array_index].hidden))))}search_results_touchstart(evt){return this.touch_started=!0,this.search_results_mouseover(evt)}search_results_touchmove(evt){return this.touch_started=!1,this.search_results_mouseout(evt)}search_results_touchend(evt){if(this.touch_started)return this.search_results_mouseup(evt)}outerHTML(element){var tmp;return element.outerHTML?element.outerHTML:((tmp=document.createElement("div")).appendChild(element),tmp.innerHTML)}get_single_html(){return`<span class="chosen-single chosen-default">\n  <span>${this.default_text}</span>\n  <div><b></b></div>\n</span>\n<div class="chosen-drop">\n  <div class="chosen-search">\n    <input class="chosen-search-input" type="text" autocomplete="off" role="combobox" aria-label="searchbox" aria-expanded="false" aria-haspopup="true" aria-autocomplete="list" autocomplete="off" />\n  </div>\n  <ul class="chosen-results" role="listbox" aria-label="search results"></ul>\n</div>`}get_multi_html(){return`<ul class="chosen-choices" role="list">\n  <li class="search-field">\n    <input class="chosen-search-input" type="text" autocomplete="off" role="combobox" aria-label="searchbox" placeholder="${this.default_text}" aria-expanded="false" aria-haspopup="true" aria-autocomplete="list" />\n  </li>\n</ul>\n<div class="chosen-drop">\n  <ul class="chosen-results" role="listbox" aria-label="search results"></ul>\n</div>`}get_no_results_html(terms){return`<li class="no-results">\n  ${this.results_none_found} <span>${this.escape_html(terms)}</span>\n</li>`}get_option_html({value:value,text:text}){return`<option value="${value}" selected>${text}</option>`}get_create_option_html(terms){return`<li class="create-option active-result" role="option"><a>${this.create_option_text}</a> <span>${this.escape_html(terms)}</span></li>`}static browser_is_supported(){return!0}}return AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results for:",AbstractChosen.default_create_option_text="Add Option:",AbstractChosen}.call(this),($=jQuery).fn.extend({chosen:function(options){return AbstractChosen.browser_is_supported()?this.each((function(input_field){var $this,chosen;chosen=($this=$(this)).data("chosen"),"destroy"!==options?chosen instanceof Chosen||$this.data("chosen",new Chosen(this,options)):chosen instanceof Chosen&&chosen.destroy()})):this}}),Chosen=class Chosen extends AbstractChosen{setup(){return this.form_field_jq=$(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex}set_up_html(){var container_classes,container_props;return(container_classes=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&container_classes.push(this.form_field.className),this.is_rtl&&container_classes.push("chosen-rtl"),container_props={class:container_classes.join(" "),title:this.form_field.title},this.form_field.id.length&&(container_props.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=$("<div />",container_props),this.container.width(this.container_width()),this.is_multiple?this.container.html(this.get_multi_html()):this.container.html(this.get_single_html()),this.form_field_jq.css("position","absolute").css("opacity",0).css("display","none").after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_results.attr("id",`${this.form_field.id}-chosen-search-results`),this.search_groups=this.container.find("li.group-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.set_aria_labels(),this.results_build(),this.set_tab_index(),this.set_label_behavior()}on_ready(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})}register_observers(){return this.container.on("touchstart.chosen",evt=>{this.container_mousedown(evt)}),this.container.on("touchend.chosen",evt=>{this.container_mouseup(evt)}),this.container.on("mousedown.chosen",evt=>{this.container_mousedown(evt)}),this.container.on("mouseup.chosen",evt=>{this.container_mouseup(evt)}),this.container.on("mouseenter.chosen",evt=>{this.mouse_enter(evt)}),this.container.on("mouseleave.chosen",evt=>{this.mouse_leave(evt)}),this.search_groups.bind("mouseup.chosen",evt=>{this.search_results_mouseup(evt)}),this.search_groups.bind("mouseover.chosen",evt=>{this.search_results_mouseover(evt)}),this.search_groups.bind("mouseout.chosen",evt=>{this.search_results_mouseout(evt)}),this.search_groups.bind("mousewheel.chosen DOMMouseScroll.chosen",evt=>{this.search_results_mousewheel(evt)}),this.search_results.on("mouseup.chosen",evt=>{this.search_results_mouseup(evt)}),this.search_results.on("mouseover.chosen",evt=>{this.search_results_mouseover(evt)}),this.search_results.on("mouseout.chosen",evt=>{this.search_results_mouseout(evt)}),this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",evt=>{this.search_results_mousewheel(evt)}),this.search_results.on("touchstart.chosen",evt=>{this.search_results_touchstart(evt)}),this.search_results.on("touchmove.chosen",evt=>{this.search_results_touchmove(evt)}),this.search_results.on("touchend.chosen",evt=>{this.search_results_touchend(evt)}),this.form_field_jq.on("chosen:updated.chosen",evt=>{this.results_update_field(evt)}),this.form_field_jq.on("chosen:activate.chosen",evt=>{this.activate_field(evt)}),this.form_field_jq.on("chosen:open.chosen",evt=>{this.container_mousedown(evt)}),this.form_field_jq.on("chosen:close.chosen",evt=>{this.close_field(evt)}),this.search_field.on("blur.chosen",evt=>{this.input_blur(evt)}),this.search_field.on("keyup.chosen",evt=>{this.keyup_checker(evt)}),this.search_field.on("keydown.chosen",evt=>{this.keydown_checker(evt)}),this.search_field.on("focus.chosen",evt=>{this.input_focus(evt)}),this.search_field.on("cut.chosen",evt=>{this.clipboard_event_checker(evt)}),this.search_field.on("paste.chosen",evt=>{this.clipboard_event_checker(evt)}),this.is_multiple?this.search_choices.on("click.chosen",evt=>{this.choices_click(evt)}):this.container.on("click.chosen",(function(evt){evt.preventDefault()}))}destroy(){return $(null!=this.container[0].getRootNode?this.container[0].getRootNode():this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.form_field_label.length>0&&this.form_field_label.off("click.chosen"),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()}set_aria_labels(){var i,j,label,labelledbyList,len,ref;if(this.search_field.attr("aria-owns",this.search_results.attr("id")),this.form_field.attributes["aria-label"]){if(this.search_field.attr("aria-label",this.form_field.attributes["aria-label"]),this.form_field.attributes["aria-labelledby"])return this.search_field.attr("aria-labelledby",this.form_field.attributes["aria-labelledby"])}else if(Object.prototype.hasOwnProperty.call(this.form_field,"labels")&&this.form_field.labels.length){for(labelledbyList="",i=j=0,len=(ref=this.form_field.labels).length;j<len;i=++j)""===(label=ref[i]).id&&(label.id=`${this.form_field.id}-chosen-label-${i}`),labelledbyList+=this.form_field.labels[i].id+" ";return this.search_field.attr("aria-labelledby",labelledbyList)}}search_field_disabled(){return this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled"),this.container.toggleClass("chosen-disabled",this.is_disabled),this.search_field[0].disabled=this.is_disabled,this.is_multiple||this.selected_item.off("focus.chosen",this.activate_field),this.is_disabled?this.close_field():this.is_multiple?void 0:this.selected_item.on("focus.chosen",this.activate_field)}container_mousedown(evt){var ref;if(!this.is_disabled&&evt&&"left"===this.mousedown_checker(evt)&&evt&&"mousedown"===evt.type&&!this.results_showing&&evt.preventDefault(),!evt||"mousedown"!==(ref=evt.type)&&"touchstart"!==ref||this.results_showing||evt.preventDefault(),null==evt||!$(evt.target).hasClass("search-choice-close"))return this.active_field?this.is_multiple||!evt||$(evt.target)[0]!==this.selected_item[0]&&!$(evt.target).parents("span.chosen-single").length||(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(null!=this.container[0].getRootNode?this.container[0].getRootNode():this.container[0].ownerDocument).on("click.chosen",this.click_test_action),this.results_show()),this.activate_field()}container_mouseup(evt){if(!this.is_disabled&&this.allow_single_deselect&&$(evt.target).hasClass("search-choice-close"))return this.results_reset(evt)}search_results_mousewheel(evt){var delta;if(evt.originalEvent&&(delta=evt.originalEvent.deltaY||-evt.originalEvent.wheelDelta||evt.originalEvent.detail),null!=delta)return evt.preventDefault(),"DOMMouseScroll"===evt.type&&(delta*=40),this.search_results.scrollTop(delta+this.search_results.scrollTop())}blur_test(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()}close_field(){return $(null!=this.container[0].getRootNode?this.container[0].getRootNode():this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.search_field.attr("aria-expanded",!1),this.container.removeClass("chosen-container-active"),this.container.removeClass("chosen-dropup"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale(),this.search_field.trigger("blur")}should_dropup(){var dropdownTop,totalHeight,windowHeight;return windowHeight=$(window).height(),dropdownTop=this.container.offset().top+this.container.height()-$(window).scrollTop(),(totalHeight=this.dropdown.height()+dropdownTop)>windowHeight}activate_field(){if(!this.is_disabled)return this.container.addClass("chosen-container-active"),this.should_dropup()&&this.container.addClass("chosen-dropup"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.attr("aria-expanded",!0),this.search_results.attr("aria-busy",!1),this.search_field.trigger("focus")}test_active_click(evt){var active_container;return active_container=$(evt.target).closest(".chosen-container"),"left"===this.mousedown_checker(evt)&&active_container.length&&this.container[0]===active_container[0]?this.active_field=!0:this.close_field()}results_build(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field,this.parser_config),this.is_multiple?this.search_choices.find("li.search-choice").remove():(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold&&!this.create_option?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1}result_do_highlight(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){if(this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),this.search_field.attr("aria-activedescendant",this.result_highlight.attr("id")),visible_bottom=(maxHeight=parseInt(this.search_results.css("maxHeight"),10))+(visible_top=this.search_results.scrollTop()),(high_bottom=(high_top=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(high_top<visible_top)return this.search_results.scrollTop(high_top)}}result_clear_highlight(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null}results_show(){return!(this.is_multiple&&this.max_selected_options<=this.choices_count()+1&&(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),this.is_multiple&&this.max_selected_options<=this.choices_count()))&&(this.should_dropup()&&this.container.addClass("chosen-dropup"),this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.trigger("focus"),this.search_field.val(this.get_search_field_value()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))}update_results_content(content){return this.search_results.html(content)}fire_search_updated(search_term){return this.form_field_jq.trigger("chosen:search_updated",{chosen:this,search_term:search_term})}results_hide(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.container.removeClass("chosen-dropup"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1}set_tab_index(el){var ti;if(this.form_field.tabIndex)return ti=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=ti}set_label_behavior(){if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=$(`label[for='${this.form_field.id}']`)),this.form_field_label.length>0)return this.form_field_label.on("click.chosen",this.label_click_handler)}set_search_field_placeholder(){return this.is_multiple&&this.choices_count()<1?this.search_field.attr("placeholder",this.default_text):this.search_field.attr("placeholder","")}show_search_field_default(){return this.search_field.val(""),this.set_search_field_placeholder(),this.is_multiple&&this.choices_count()<1&&!this.active_field?this.search_field.addClass("default"):this.search_field.removeClass("default")}search_results_mouseup(evt){var target;if("left"===this.mousedown_checker(evt)&&(target=$(evt.target).is(".active-result,.group-result")?$(evt.target):$(evt.target).parents(".active-result").first()).length)return this.result_highlight=target,this.result_select(evt),this.search_field.focus()}search_results_mouseover(evt){var target;if(target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first())return this.result_do_highlight(target)}search_results_mouseout(evt){if($(evt.target).hasClass("active-result")||$(evt.target).parents(".active-result").first())return this.result_clear_highlight()}choice_build(item){var choice,close_link;return choice=$("<li />",{class:"search-choice","data-value":item.value,role:"option"}).html(`<span>${this.choice_label(item)}</span>`),item.disabled?choice.addClass("search-choice-disabled"):((close_link=$("<button />",{type:"button",tabindex:-1,"aria-label":"remove",class:"search-choice-close","data-option-array-index":item.data["data-option-array-index"]})).on("click.chosen",evt=>this.choice_destroy_link_click(evt)),choice.append(close_link)),this.inherit_option_classes&&item.classes&&choice[0].classList.add(item.classes),this.search_container.before(choice)}choice_destroy_link_click(evt){if(evt.preventDefault(),evt.stopPropagation(),!this.is_disabled)return this.choice_destroy($(evt.target))}choice_destroy(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index")))return this.active_field?this.search_field.trigger("focus"):this.show_search_field_default(),this.is_multiple&&this.hide_results_on_select&&this.choices_count()>0&&this.get_search_field_value().length<1&&this.results_hide(),link.parents("li").first().remove(),this.set_search_field_placeholder(),this.search_field_scale()}results_reset(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.trigger_form_field_change(),this.active_field)return this.results_hide()}results_reset_cleanup(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find(".search-choice-close").remove()}result_select(evt){var high,item;if($(evt.target).hasClass("group-result")){if(!this.can_select_by_group)return;$(evt.target).nextAll().each((_,option)=>{var array_index,is_chosen;return!$(option).hasClass("group-result")&&(array_index=$(option).attr("data-option-array-index"),is_chosen=!1,$("#pops_chosen > .chosen-choices").find(".search-choice-close").each((_,choice)=>{if($(choice).attr("data-option-array-index")===array_index)return is_chosen=!0,!1}),is_chosen?void 0:(this.result_highlight=$(option),evt.target=option,evt.selected=!0,this.result_select(evt)))})}else if(this.result_highlight)return(high=this.result_highlight).hasClass("create-option")?(this.select_create_option(this.search_field.val()),this.results_hide()):(this.result_clear_highlight(),!(this.is_multiple&&this.max_selected_options<=this.choices_count()+1&&(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),this.is_multiple&&this.max_selected_options<=this.choices_count()))&&(this.is_multiple?high.removeClass("active-result"):this.reset_single_select_options(),high.addClass("result-selected"),(item=this.results_data[high[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[item.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(item):this.single_set_selected_text(this.choice_label(item)),this.is_multiple&&(!this.hide_results_on_select||evt.metaKey||evt.ctrlKey)?evt.metaKey||evt.ctrlKey?this.winnow_results({skip_highlight:!0}):(this.search_field.val(""),this.winnow_results()):(this.results_hide(),this.show_search_field_default()),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.trigger_form_field_change({selected:this.form_field.options[item.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,evt.preventDefault(),this.search_field_scale()))}single_set_selected_text(text=this.default_text){return text===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(text)}result_deselect(pos){var result_data;return result_data=this.results_data[pos],!this.form_field.options[result_data.options_index].disabled&&(result_data.selected=!1,this.form_field.options[result_data.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.trigger_form_field_change({deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale(),!0)}single_deselect_control_build(){if(this.allow_single_deselect)return this.selected_item.find(".search-choice-close").length||this.selected_item.find("span").first().after('<button type="button" tabindex="-1" aria-label="remove" class="search-choice-close"></button>'),this.selected_item.addClass("chosen-single-with-deselect")}get_search_field_value(){return this.search_field.val()}get_search_text(){return $.trim(this.get_search_field_value())}escape_html(text){return $("<div/>").text(text).html()}winnow_results_set_highlight(){var do_high,selected_results;if(null!=(do_high=(selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?selected_results.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(do_high)}no_results(terms){var no_results_html;return no_results_html=this.get_no_results_html(terms),this.search_results.append(no_results_html),this.form_field_jq.trigger("chosen:no_results",{chosen:this})}show_create_option(terms){var create_option_html;return create_option_html=this.get_create_option_html(terms),this.search_results.append(create_option_html)}create_option_clear(){return this.search_results.find(".create-option").remove()}select_create_option(terms){return $.isFunction(this.create_option)?this.create_option.call(this,terms):this.select_append_option({value:terms,text:terms})}select_append_option(options){var option;return option=this.get_option_html(options),this.form_field_jq.append(option),this.form_field_jq.trigger("chosen:updated"),this.form_field_jq.trigger("change"),this.search_field.trigger("focus")}no_results_clear(){return this.search_results.find(".no-results").remove()}keydown_arrow(){var next_sib;return this.results_showing&&this.result_highlight?(next_sib=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(next_sib):void 0:this.results_showing&&this.create_option?this.result_do_highlight(this.search_results.find(".create-option")):this.results_show()}keyup_arrow(){var prev_sibs;return this.results_showing||this.is_multiple?this.result_highlight?(prev_sibs=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(prev_sibs.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()}keydown_backstroke(){var next_available_destroy;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find(".search-choice-close").first()),this.clear_backstroke()):(next_available_destroy=this.search_container.siblings("li.search-choice").last()).length&&!next_available_destroy.hasClass("search-choice-disabled")?(this.pending_backstroke=next_available_destroy,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0}clear_backstroke(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null}search_field_scale(){var div,j,len,style,style_block,styles,width;if(this.is_multiple){for(style_block={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"},j=0,len=(styles=["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","textTransform","letterSpacing"]).length;j<len;j++)style_block[style=styles[j]]=this.search_field.css(style);return(div=$("<div />").css(style_block)).text(this.get_search_field_value()||this.search_field.attr("placeholder")),$("body").append(div),width=div.width()+25,div.remove(),this.container.is(":visible")&&(width=Math.min(this.container.outerWidth()-10,width)),this.search_field.width(width)}}trigger_form_field_change(extra){return this.form_field_jq.trigger("input",extra),this.form_field_jq.trigger("change",extra)}}}).call(this);